# HtmlGen++ (html_gen_cpp)

## Project Overview

A modern C++20 library for generating HTML from code. Developers can create HTML documents programmatically using a fluent interface with element classes like `div`, `p`, `table`, `form`, etc.

## Development Environment

- Language: C++20
- Build System: CMake 3.15+ with Visual Studio 2022 toolchain
- Testing: Catch2 (via vcpkg)

**IMPORTANT**: Always use the Visual Studio toolchain (MSBuild). Do NOT use CLion/Ninja due to environment issues.

## Project Structure

```
html_gen_cpp/
├── .claude/              # Claude Code configuration
├── include/              # Header files
│   ├── html_tags.h       # Main include (includes all others)
│   ├── html_core.h       # Core element classes
│   ├── html_basic.h      # Basic HTML elements
│   ├── html_table.h      # Table elements
│   ├── html_form.h       # Form elements
│   ├── html_semantic.h   # Semantic HTML5 elements
│   ├── html_media.h      # Media elements
│   ├── html_gen_resources.h  # CDN/embedded resource management
│   └── html_gen_charts.h # ApexCharts integration
├── src/                  # Source files
│   ├── html_tags.cpp     # Core implementation
│   └── charts.cpp        # Chart implementation
├── tests/                # Unit tests (Catch2)
├── build/                # Build output (generated by CMake)
├── CMakeLists.txt        # Main build configuration
└── CLAUDE.md             # This file
```

## Prerequisites

- Visual Studio 2022 (Community or higher)
- CMake 3.15+
- vcpkg with Catch2 (for testing only)

## Build Instructions

**IMPORTANT**: Use Visual Studio 2022 toolchain only. Do NOT use CLion/Ninja.

### Initial CMake Configuration

```cmd
mkdir build
cd build
cmake .. -G "Visual Studio 17 2022"
```

For testing with Catch2:
```cmd
cmake .. -G "Visual Studio 17 2022" -DCMAKE_TOOLCHAIN_FILE=/path/to/vcpkg/scripts/buildsystems/vcpkg.cmake
```

### Build Command

```cmd
cmake --build build --config Debug
```

Or with MSBuild directly:
```cmd
"C:\Program Files\Microsoft Visual Studio\2022\Community\MSBuild\Current\Bin\MSBuild.exe" ^
    build\html_gen_cpp.sln ^
    -p:Configuration=Debug ^
    -v:minimal
```

## Running Tests

```cmd
# Run all tests
build\tests\Debug\test_html_tags.exe

# Run with verbose output
build\tests\Debug\test_html_tags.exe -s

# Run specific test by tag
build\tests\Debug\test_html_tags.exe "[chart]"
build\tests\Debug\test_html_tags.exe "[page]"
build\tests\Debug\test_html_tags.exe "[element]"
```

## Usage Examples

### Basic Page

```cpp
#include "html_tags.h"
using namespace html;

page pg;
pg.head << title("My Page");

pg << h1("Welcome")
   << p("This is a paragraph.")
   << div(
        ul(
            li("Item 1"),
            li("Item 2")
        )
      ).cl("container");

std::cout << pg;
```

### Form Example

```cpp
form f;
f.action("/submit").method("POST");

f << label("Username:").for_id("username")
  << input().type("text").name("username").id("username").required()
  << br()
  << label("Password:").for_id("password")
  << input().type("password").name("password").id("password").required()
  << br()
  << button("Submit").type("submit");
```

### Charts (ApexCharts)

```cpp
#include "html_gen_charts.h"

chart::line_chart line;
line.m_id = "my_chart";
line.m_data_name = "Sales";
line.m_color = "#3498db";
for (double val : {10.0, 25.0, 15.0, 30.0, 22.0}) {
    line.add(val);
}
pg << line.html();
```

Charts auto-register the ApexCharts CDN dependency when added to a page.

## Available Elements

### Core HTML
- Text: `text`, `p`, `span`, `strong`, `em`, `b`, `small_`
- Headings: `h1`, `h2`, `h3`, `h4`, `h5`, `h6`
- Links: `anchor`, `link`, `head_link`
- Lists: `ul`, `ol`, `li`
- Structure: `div`, `br`, `hr`

### Tables
- `table`, `tr`, `td`, `th`, `thead`, `tbody`, `tfoot`, `caption`

### Forms
- `form`, `input`, `button`, `select`, `option`, `label`, `fieldset`, `legend`, `textarea`

### Semantic HTML5
- `header`, `footer`, `section`, `article`, `aside`, `main`, `nav`

### Media
- `video`, `audio`, `source`, `img`

### Charts (ApexCharts)
- `chart::line_chart` - Simple line chart with numeric data
- `chart::bar_chart` - Bar chart with categories
- `chart::timeseries_line_chart` - Line chart with datetime x-axis

## API Reference

### Element Methods

All elements support these chainable methods:
- `.id(string)` - Set element ID
- `.cl(string)` - Set CSS class
- `.add_cl(string)` - Add CSS class
- `.style(string)` - Set inline style
- `.type(string)` - Set type attribute
- `.role(string)` - Set ARIA role
- `.src(string)` - Set source URL
- `.href(string)` - Set hyperlink reference
- `.alt(string)` - Set alt text
- `.add_attr(name, value)` - Add custom attribute

### Content Methods
- `.add(element)` - Add child element
- `<< element` - Stream operator for adding children
- `.content(string)` - Replace content
- `.clear()` - Clear children

### Finding Elements
- `.get(id)` - Get element by ID (throws if not found)
- `.find(id)` - Find element by ID (returns nullptr if not found)
- `.exists(id)` - Check if element exists
- `[id]` - Access element by ID

## Guidelines

- Follow C++ best practices and modern C++20 standards
- Use fluent interface patterns for element construction
- Always escape user-provided content with `html_escape()`
